<?php $data = $block->_formData()? $block->_formData():false ?>


<table>
    <?php foreach ( $block->getWebsites() as $website) {
        $groups = $website->getGroups();
        if( count($groups) > 0 ){
            foreach ($website->getGroups() as $group) { ?>
                <tr>
                    <td colspan="2" class="site-group-name">
                        <span> <?php echo $website->getName() . ' - ' . $group->getName(); ?> </span>
                    </td>
                </tr>
                <tr>
                    <td><h4>Store View</h4></td>
                    <td><h4>Source Store Language</h4></td>
                    <td><h4>Source Language</h4></td>
                    <td><h4>Destination Language</h4></td>
                </tr>
                <?php $stores = $group->getStores();
                if( count( $stores ) > 0 ) {
                    foreach ($stores as $store) { ?>
                        <tr>
                            <td><?php echo $store->getName() ?></td>
                            <td><?php echo $group->getName() ?></td>
                            <td></td>
                            <td>
                                <div class="admin__field field required _required">
                                    <div class="admin__field-control control">
                                        <select name="destination_language" id="target-language" class="required-entry _required select admin__control-select">
                                            <option value=""><?php echo __('Select destination language') ?></option>
                                            <?php foreach ($block->_getOptions() as $languages): ?>
                                                <?php if($languages->code == $data['destination_language']):?>
                                                    <option value="<?php echo $languages->code ?>" selected="selected"><?php echo $languages->name ?></option>
                                                <?php else: ?>
                                                    <option value="<?php echo $languages->code ?>"><?php echo $languages->name ?></option>
                                                <?php endif;?>
                                            <?php endforeach; ?>
                                        </select>
                                    </div>
                                </div>
                            </td>
                        </tr>
                    <?php }
                }else{ ?>
                    <tr class="store-view-list">
                        <td colspan="2">
                            <span><?php echo __("No store views for this website."); ?></span>
                        </td>
                    </tr>
                    <?php
                }
            }
        }else{ ?>
            <tr>
                <td colspan="2">
                    <span class="site-group-name"> <?php echo $website->getName(); ?> </span>
                </td>
            </tr>
            <tr>
                <td colspan="2">
                    <span> <?php echo __("No stores for this website."); ?> </span>
                </td>
            </tr>
        <?php }

    }?>
</table>


